### 导出

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface ExportField {

    String name() default "";

    int value() default 0;
}
```

```
/**
     * 拿到有自定义注解的实体类的字段
     * Class<?> clazz = XXXX.class;
     * Class<? extends Annotation> annotationType = AnnotationType.class;
     * System.out.println(getExportColumn(clazz, annotation));
     *
     * @param clazz      具体的类
     * @param annotation 类上的注解
     * @return 返回以逗号分隔带有注解的字段名的字符串
     */
    public static String getExportColumn(Class<?> clazz, Class<? extends Annotation> annotation) {
        List<Field> fields = getFieldsWithAnnotation(clazz, annotation);
        List<String> field = fields.stream().map(java.lang.reflect.Field::getName).collect(Collectors.toList());
        return String.join(",", field);
    }

    public static List<java.lang.reflect.Field> getFieldsWithAnnotation(Class<?> clazz, Class<? extends Annotation> annotation) {
        List<java.lang.reflect.Field> fields = new ArrayList<>();
        for (java.lang.reflect.Field field : clazz.getDeclaredFields()) {
            if (field.isAnnotationPresent(annotation)) {
                fields.add(field);
            }
        }
        return fields;
    }

    /**
     * 获取类上的注解的里值
     *
     * @param clazz      具体的类
     * @param annotation 类上的注解
     * @param attribute  注解里的属性
     * @param <T>
     * @return 拿不到返回空字符串
     */
    public static <T extends Annotation> Object getClassAnnotationValue(Class<?> clazz, Class<T> annotation, String attribute) {
        if (clazz.isAnnotationPresent(annotation)) {
            T myAnnotation = clazz.getAnnotation(annotation);
            try {
                Method valueMethod = annotation.getMethod(attribute);
                return valueMethod.invoke(myAnnotation);
            } catch (Exception e) {
                return "";
            }
        }
        return "";
    }

    /**
     * 默认获取注解的value
     *
     * @param clazz      具体的类
     * @param annotation 类上的注解
     * @param <T>
     * @return
     */
    public static <T extends Annotation> Object getClassAnnotationValue(Class<?> clazz, Class<T> annotation) {
        return getClassAnnotationValue(clazz, annotation, "value");
    }
    
    


```

··········

````
public static void getAnnotatedFields(Class<?> clazz, Class<? extends Annotation> annotationClass) {
        List<Field> fields = new ArrayList<>();
        for (Field field : clazz.getDeclaredFields()) {
            if (field.isAnnotationPresent(annotationClass)) {
                fields.add(field);
            }
        }
        fields.sort(new Comparator<Field>() {
            @Override
            public int compare(Field field1, Field field2) {
                Annotation annotation1 = field1.getAnnotation(annotationClass);
                Annotation annotation2 = field2.getAnnotation(annotationClass);
                Method valueMethod = null;
                Integer value1 = null;
                Integer value2 = null;
                try {
                    valueMethod = annotationClass.getMethod("value");
                    value1 = (Integer) valueMethod.invoke(annotation1);
                    value2 = (Integer) valueMethod.invoke(annotation2);
                } catch (Exception e) {
                    throw new RuntimeException(e);
                }
                return value1 - value2;
            }
        });

        List<String> field = fields.stream().map(java.lang.reflect.Field::getName).collect(Collectors.toList());
        System.out.println( String.join(",", field));

    }

````